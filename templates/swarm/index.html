<html lang="ja">
<head>
<meta charset="UTF-8">
<title></title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
<script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
<style type="text/css">
  html,body{
    height: 100%;
    width: 100%;
  }
  #mapid {
    height: 90%;
  }
</style>
</head>
<body>
  <a href="https://foursquare.com/oauth2/authenticate?client_id={{ app.key }}&response_type=code&redirect_uri={{ app.redirect }}">
    authenticate
  </a>
  <div id="mapid"></div>
  <p>参照元：<a href="http://nlftp.mlit.go.jp/ksj/jpgis/datalist/KsjTmplt-P11.html">国土交通省　国土数値情報</a></p>
</body>
<script>
function setinit(){
  var map = L.map('mapid').setView([35.7, 139.5], 12);
  return map;
};
var map = setinit();
var geojson;
var basemap_id;
L.tileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
  {
    attribution: "<a href='http://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html' target='_blank'>国土地理院</a>|<a href='http://nlftp.mlit.go.jp/ksj/jpgis/datalist/KsjTmplt-P11.html'>国土交通省　国土数値情報</a>"
  }
).addTo(map);
map.eachLayer(function (layer){
  console.log(layer._leaflet_id);
  basemap_id = layer._leaflet_id;
});
geojson = L.geoJson({{ g | safe }});
//PointAll.addLayer(geojson);
map.addLayer(geojson);
function getgeojson(file="/static/echi.geojson"){
  $.getJSON(file, function (data) {
      var PointAll = L.markerClusterGroup({
        showCoverageOnHover: false,
        spiderfyOnMaxZoom: true,
        removeOutsideVisibleBounds: true,
        disableClusteringAtZoom: 1
       });
      var pointdata = data;
  });
};
//getgeojson();
</script>
</html>